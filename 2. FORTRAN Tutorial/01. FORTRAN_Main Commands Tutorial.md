# FORTRAN Main Commands

# Variables
In FORTRAN, variables are classified into four primary types: Integer, Real, Character, and Logical.

```
Integer  i
Real*8   p      ,q        ,r
```

# Calculation Operations and their Precedence
In FORTRAN, addition, subtraction, multiplication, division, and power operations are performed using the symbols `+`, `-`, `*`, `/`, and `**` respectively.   

The order of operation precedence in FORTRAN is as follows:
1. Calculation of the expression inside the parentheses and library functions
2. Power
3. Multiplication and division
4. Addition and subtraction

# Structure of FORTRAN Programs
A structure called **General Structure** is suggested for writing programs. 

Note: Older FORTRAN programs typically used the `.For` extension, while newer FORTRAN programs use the `.F90` extension."

# Data Input
- User Data Entry

```
Read(*,*) x
```

- Programmer Data Entry

```
Pi=3.14
```

In FORTRAN, complex numbers are expressed as ordered pairs in the form $ùëç = ùëé + ùëèùëñ$ represented by `(a, b)`. For example:

```
Ii=(0.,1.)
```

# Program Output
The `Write` command is used to display information on the screen. A comma (`,`) should separate variables that are to be printed.

```
Write(*,*) a,b
```

Note: To print a text phrase, enclose it in quotation marks.

```
Write(*,*)  ‚ÄòResult=‚Äò ,a 
```

To format output in a specific way, a specialized operator can be used in place of the `*` symbol within the Write command.

Key formatting operators include:

- `X`: Inserts a blank space
- `Fw.d`: Outputs a decimal number with a total field length of `W` and `d` decimal places
- `L`: Outputs a logical variable
- `Ew.d`: Outputs a number in scientific notation with a total field length of `W` and `d` decimal places
- `Aw`: Outputs a string with field length `w`
- `Im`: Outputs an integer with field length `m`
- `' '`: Outputs the exact text enclosed in quotation marks
- `/`: Moves the cursor to the next line
- `\`: Keeps the cursor on the same line


```
Write(*, '( operators )' ) outputs
```

`do` command:
- The `do` loop is written as follows:
```
Write(*,*)
Do  i=1,5,2
        Write(*, ‚Äò(a, i2)‚Äô ) ‚Äôi=‚Äò , i 
End  do     !i
```

- `do` and `exit` loop:
```
Write(*,*)
Do
      q=q+1
       write(*, ‚Äò ( a, f6.2) ‚Äô) ‚Äòq=‚Äò ,q
       if  (q==5)  exit
End do    !i
```
- `do` and `While` loop:
```
Write(*,*)

Do while   (r<5)
       r=r+1
       write(* , ‚Äò(a, f6.2)‚Äô) ‚Äôr=‚Äò ,r
End  do !i
```

# Conditional Commands
Using conditional statements, specific sections of the program can be executed based on certain conditions. The basic structure of a conditional command in FORTRAN is:

```
If (a logical expression) executive command
```

A logical expression can represent equality, inequality, or comparison. In FORTRAN, the following symbols are used for conditions:

```
.GE.  or  >=  Greater than or equal to
.GT.  or  >   Greater
.LE.  or  <=  Smaller than or equal to
.LT.  or  <   Smaller
.EQ.  or  ==  Equality
.N.E. or  \=  Inequality
```

Multiple conditions can be combined using the following logical operators:

```
.AND.   The equivalent of "and" means that two conditions are met
.OR.    The equivalent of "or" means that at least one of the conditions is met
.NOT.   It means establishing a condition
```

# Arrays
Arrays in FORTRAN are multidimensional variables, similar to one-dimensional or multi-dimensional matrices. Data can be assigned to arrays based on the indices of their corresponding rows and columns.

To define the dimensions of an array, the following method is used in the variable definition section:

![Dimentionality](../Archive/images/2.%20Fortran_tutorial%20images/fig1.JPG)

According to the General Structure (GS), the number of entries in each dimension is specified as follows:

One-dimensional (Line):   

![1D](../Archive/images/2.%20Fortran_tutorial%20images/fig2.JPG)

Two-dimensional (Plane):   

![2D](../Archive/images/2.%20Fortran_tutorial%20images/fig3.JPG)

Three-dimensional (Volume):

![3D](../Archive/images/2.%20Fortran_tutorial%20images/fig4.JPG)

Four-dimensions: 

It is important to understand that these titles function like addresses, and from this point onward, they cannot be represented with a simplified image.

![4D](../Archive/images/2.%20Fortran_tutorial%20images/fig5.JPG)

Note: The purpose of presenting the above content was to express this fact that the rows can be zero, negative and even decimal, but the step is one for all of them.

# Operations on Arrays
Arrays can be used similarly to matrices, allowing for operations such as addition, subtraction, and multiplication.

```
A = B + C    ;     D = A * E
```

**Using arrays**
- Assigning Data Using a Formula, populate array elements based on a specific formula, such as `i*j`:

```
Do  i=1,2
      do  j=1,3
             A(i,j)=i*j
      end do   ! j
End do  ! i
```

- Reading Data from User Input, obtain array values directly from the user:

```
Read(*,*) A(i,j)
```

- Reading Data from a File, retrieve array values from `file 1` to use in subsequent operations:

```
Read(1,*) A(i,j)
```

# Files
When the program‚Äôs input data or output results are extensive, a `file` can be used to facilitate reading and writing this information. Data can be stored in a new file using the programming software, allowing for easy saving and retrieval.

To create or read data from a file, use the following command:

```
Open (file number, File='file name')

Read(file number, *) a,b,...
```

The following commands can also be used to print the output on a file:

```
Open (file number, File=' Desired name for the results file')

Write(file number, *) outputs
```

Note 1: Each time the `Read(file number,*)` command is used, one line is read from the file. Using free format, the command automatically advances to the next line after each read. 

To skip a line, use:

```
Read(1,*)
```

Note 2: In the data file, a minimum of one space is required between entries to ensure data separation.

Note 3: Lines in the data file can include explanatory comments for users. These lines are ignored by the program and can be skipped with the following command for each comment line:

```
Read(file number,*)
```

Note 4: The command below can insert results or an empty line in the output file.

```
Write(file number,*)
```

Note 5: The file number is a temporary identifier used to distinguish between files.

Note 6: If there is even a slight mismatch in type (e.g., integer, real, or string) or number of variables between the input file and the variables read by the `Read` command, it may result in errors or inaccuracies in program execution.

## Close the File
To close a file, use the following command:

```
Close (file number)
```

## Resume Reading Information in a File
Use the following command to reset the file pointer to the beginning of a file, allowing its contents to be read again:

```
Rewind (file number)
```

To move the file pointer back to one or more previous lines in the data file, the following command can be repeated as needed:

```
Backspace (file number)
```

# Library Functions
FORTRAN provides a variety of built-in functions to simplify programming, which can be utilized simply by referencing their names.

| Function | Description | 
|--------|--------| 
| ABS(a) | It calculates the absolute value of the number `a`. |  
| AINT(a) | It removes the decimal part of the number `a`, but the result remains a real number. |  
| ANINT(a) | It rounds the real number `a` to the nearest integer. |  
| NINT(a) | Rounds the real number `a` and the result will be an integer number (by removing the decimal point). | 
| INT(a) | It converts the real number `a` into an integer by removing its decimal part. |  
| Real(N) | Converts integer `N` to real type. Using this, the number `N` can be received as a decimal. | 
| SIN(a), COS(a), TAN, COTAN(a) | They calculate the sine, cosine, tangent and cotangent of the number `a` respectively. |  
| ASIN(a), ACOS(a), TAN, ATAN(a) | They calculate the inverse of sine, cosine, tangent and cotangent of the number `a`. | 
| SINH(a), COSH(a), TANH(a) | They calculate the sine, cosine, and hyperbolic tangent of the number `a`, respectively. |  
| EXP(a)| Equivalent to $e^{a}$. | 
| LOG(a) | Equivalent to `Ln(a)`. |  
| Log10(a) | Equivalent to `Log(a)`. |  
| SQRT(a) | It is equivalent to $\sqrt{a}$ , Explanation: To calculate the $n_{th}$ root of a number, you should write $a^{\frac{1}{n}}$ |
| MAX(a,b,‚Ä¶) | The result of this function will be the maximum number of its input. |  
| MIN(a,b,‚Ä¶) | The result of this function will be the minimum of its input numbers. |  
| MOD(a,b) | Calculates the remainder of the correct division of `a` by `b`. |  
| CALL RANDOM(a) | Assigns a random value between 0 and 1 to the number `a`. |  
| CALL GETTIM (Ih,Im,Is,I100th) | Receives the time with an accuracy of hundredths of a second. After executing this command, $I_h$, $I_m$, $I_s$, and $I_{100th}$ are respectively equal to hours (1 to 24), minutes, seconds, and hundredths of seconds (in the form of whole numbers). |  
| CALL SETTIM (Ih,Im,Is,I100th) | If the correct variables $I_h$, $I_m$, $I_s$, and $I_{100th}$ have values, they record the new time. |  
| GETDAT (Iyr, Imon, Iday) | After executing this command, the year, month, and day will be recorded in the $I_{yr}$, $I_{mon}$, and $I_{day}$ variables. |   
| SETDAT (Iyr, Imon, Iday) | The new year, month and day values will be recorded on the device. |  


# Creating a Function
To perform calculations or operations that do not exist in FORTRAN, the corresponding function can be defined and used in the following two ways:

1. Defining a One-Sentence Function: The easiest way to define a function is to write the relevant relation after non-executable commands (such as integer, Data, etc.) and before executable commands (such as `Read`, etc.). In the use of one-sentence functions, it is better to set a name for the function which is not the same as the name of the internal FORTRAN functions.

```
Real a,b,c
F(x,y,z)=(x+y+z)**2
Read(*,*)a,b,c
Write(*,*)f(a,b,c)
end
```

Note: As can be seen in the example above, the variables used for the function are only important in terms of their placement order, and changing their names does not cause any problems in the application.

2. Defining a Function using the `Function` command: If the function defined by the user is long, it is better to define it as a `Function`. For this, the function is written with the `Function` command after the main program. Calling the function in the text of the main program is done only by writing it.

```
Read(*,*)a,b,c
Write(*,*)f(a,b,c)
end
```

```
Function F(x,y,z)
C1=(x+y)**2
C2=(x+z)**2
C3=(y+z)**2
F=(c1+c2+c3)**2
end
```

Note: The name of the function in the `Function` subprogram must be used without including its variables. Means, using `F(x,y,z)` instead of `F` will cause an error.

# Programming Tips

- Incremental Sum:  
For the incremental addition of several data, you can proceed in a similar way to the following example:

```
Sum=0
Do i=1,n
     sum=sum+A(i)
End do
```

- Successive Multiplication:   
A method like the following example is used for successive multiplication of several data:

```
P=1
Do    i=1,n
         p=p*A(i)
End do
```

- Character Data Binding:  
Expressions are assigned to character variables either through the `Read` command or with the `=` sign. `//` operator can be used to connect two or more character variables (or data) to each other.

```
Character name1*10, name2*10, text*20
Name1=‚ÄòCarl‚Äô
Name2=‚ÄòTaylor‚Äô
Text=name1//name2
Write(*,*)text
```

Output:

```
Carl    Taylor
```

If we want to delete the unoccupied remainder of the field of a character variable, the way that it is only limited to the occupied characters, we must use the `Trim` command. In the previous program, if the `Text` variable is defined in the following way, the output will be properly and with only one space between two words.

```
Text=trim(name1)//‚Äô ‚Äò//trim(name2)
```

Output:

```
Carl Taylor
```
